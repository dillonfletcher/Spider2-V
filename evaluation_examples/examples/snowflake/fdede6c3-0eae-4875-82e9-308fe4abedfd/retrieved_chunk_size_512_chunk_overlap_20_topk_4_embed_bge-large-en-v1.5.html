Documentation Source:
docs.snowflake.com/en/user-guide/cleanrooms/demo-flows/custom-templates.html

Documentation Title:
Snowflake Data Clean Rooms: Custom Analysis Templates | Snowflake Documentation

Documentation Content:
To see the top 10 rows, use this query:</p><div><pre><span>select</span><span>*</span><span>from</span><span>SAMOOHA_SAMPLE_DATABASE_NAV2</span><span>.</span><span>DEMO</span><span>.</span><span>CUSTOMERS</span><span>limit</span><span>10</span><span>;</span></pre><span>Copy</span></div><p>Specify which columns the consumer is allowed to join on when running templates within the clean room. This procedure should be called on identity columns like email. The join policy is “replace only”, so if the function is called again, then the previously set join policy is completely replaced by the new one.</p><div><pre><span>call</span><span>samooha_by_snowflake_local_db</span><span>.</span><span>provider</span><span>.</span><span>set_join_policy</span><span>($</span><span>cleanroom_name</span><span>,</span><span>[</span><span>'SAMOOHA_SAMPLE_DATABASE_NAV2.DEMO.CUSTOMERS:HEM'</span><span>]);</span></pre><span>Copy</span></div><p>If you want to view the join policy that has been added to the clean room, call the following procedure.</p><div><pre><span>call</span><span>samooha_by_snowflake_local_db</span><span>.</span><span>provider</span><span>.</span><span>view_join_policy</span><span>($</span><span>cleanroom_name</span><span>);</span></pre><span>Copy</span></div></section><section><h3>Add a custom analysis templates to the clean room<a>¶</a></h3><p>To add a custom analysis template to the clean room you need a placeholder for table names on both the provider and consumer sides, along with join columns from the provider side.



Documentation Source:
docs.snowflake.com/en/user-guide/functions-window-using.html

Documentation Title:
Using Window Functions | Snowflake Documentation

Documentation Content:
The rows are put in descending order (highest profit first), so the most profitable store has rank 1:</p><div><pre><span>SELECT</span><span>city</span><span>,</span><span>branch_ID</span><span>,</span><span>net_profit</span><span>,</span><span>RANK</span><span>()</span><span>OVER</span><span>(</span><span>PARTITION</span><span>BY</span><span>city</span><span>ORDER</span><span>BY</span><span>net_profit</span><span>DESC</span><span>)</span><span>AS</span><span>rank</span><span>FROM</span><span>store_sales</span><span>ORDER</span><span>BY</span><span>city</span><span>,</span><span>rank</span><span>;</span><span>+</span><span>-----------+-----------+------------+------+</span><span>| CITY      | BRANCH_ID | NET_PROFIT | RANK |</span><span>|-----------+-----------+------------+------|</span><span>| Montreal  |         3 |   10000.00 |    1 |</span><span>| Montreal  |         4 |    9000.00 |    2 |</span><span>| Vancouver |         2 |   15000.00 |    1 |</span><span>| Vancouver |         1 |   10000.00 |    2 |</span><span>+</span><span>-----------+-----------+------------+------+</span></pre><span>Copy</span></div><div><p>Note</p><p>The <span>net_profit</span>column is <span>not</span>passed to the <span>RANK</span>function. In
this query, the rows are sorted in order by <span>net_profit</span>by using the <code><span>ORDER</span><span>BY</span></code>sub-clause of the <span>OVER</span>clause.



Documentation Source:
docs.snowflake.com/en/user-guide/sample-data-tpch.html

Documentation Title:
Sample Data: TPC-H | Snowflake Documentation

Documentation Content:
These aggregates are grouped by
RETURNFLAG and LINESTATUS, and listed in ascending order of RETURNFLAG and LINESTATUS. A count of the number of line items in each group is included:</p><div><pre><span>use</span><span>schema</span><span>snowflake_sample_data</span><span>.</span><span>tpch_sf1</span><span>;</span><span>-- or snowflake_sample_data.{tpch_sf10 | tpch_sf100 | tpch_sf1000}</span><span>select</span><span>l_returnflag</span><span>,</span><span>l_linestatus</span><span>,</span><span>sum</span><span>(</span><span>l_quantity</span><span>)</span><span>as</span><span>sum_qty</span><span>,</span><span>sum</span><span>(</span><span>l_extendedprice</span><span>)</span><span>as</span><span>sum_base_price</span><span>,</span><span>sum</span><span>(</span><span>l_extendedprice</span><span>*</span><span>(</span><span>1</span><span>-</span><span>l_discount</span><span>))</span><span>as</span><span>sum_disc_price</span><span>,</span><span>sum</span><span>(</span><span>l_extendedprice</span><span>*</span><span>(</span><span>1</span><span>-</span><span>l_discount</span><span>)</span><span>*</span><span>(</span><span>1</span><span>+</span><span>l_tax</span><span>))</span><span>as</span><span>sum_charge</span><span>,</span><span>avg</span><span>(</span><span>l_quantity</span><span>)</span><span>as</span><span>avg_qty</span><span>,</span><span>avg</span><span>(</span><span>l_extendedprice</span><span>)</span><span>as</span><span>avg_price</span><span>,



Documentation Source:
docs.snowflake.com/en/user-guide/tutorials/tasty-bytes-sql-load.html

Documentation Title:
Load and query sample data using SQL | Snowflake Documentation

Documentation Content:
Query the data<a>¶</a></h2><p>Now that the data is loaded, you can run queries on the <span>menu</span>table.</p><p>To run a query in the open worksheet, select the line or lines of the SELECT command,
and then select <span>Run</span>.</p><p>For example, to return the number of rows in the table, run the following query:</p><div><pre><span>SELECT</span><span>COUNT</span><span>(*)</span><span>AS</span><span>row_count</span><span>FROM</span><span>tasty_bytes_sample_data</span><span>.</span><span>raw_pos</span><span>.</span><span>menu</span><span>;</span></pre><span>Copy</span></div><p>Your output looks similar to the following image.</p><img/><p>Run this query to return the top ten rows in the table:</p><div><pre><span>SELECT</span><span>TOP</span><span>10</span><span>*</span><span>FROM</span><span>tasty_bytes_sample_data</span><span>.</span><span>raw_pos</span><span>.</span><span>menu</span><span>;</span></pre><span>Copy</span></div><p>Your output looks similar to the following image.</p><img/><p>For more information about running a query that returns the specified number of rows,
see <span>TOP &lt;n&gt;</span>.</p><p>You can run other queries in the worksheet to explore the data in the <span>menu</span>table.</p></section><section><h2>Step 7. Clean up, summary, and additional resources<a>¶</a></h2><p>Congratulations! You have successfully completed this tutorial for trial accounts.</p><p>Take a few minutes to review a short summary and the key points covered in this tutorial.
Consider cleaning up by dropping any objects you created in this tutorial.



