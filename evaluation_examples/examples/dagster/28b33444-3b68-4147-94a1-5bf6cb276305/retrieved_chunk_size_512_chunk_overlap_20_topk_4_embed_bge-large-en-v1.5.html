Documentation Source:
release-1-7-2.dagster.dagster-docs.io/concepts/partitions-schedules-sensors/sensors.html

Documentation Title:
Sensors | Dagster Docs

Documentation Content:
<span>class</span><span>FileConfig</span><span>(</span>Config<span>)</span><span>:</span>filename<span>:</span><span>str</span><span>@op</span><span>def</span><span>process_file</span><span>(</span>context<span>:</span>OpExecutionContext<span>,</span>config<span>:</span>FileConfig<span>)</span><span>:</span>context<span>.</span>log<span>.</span>info<span>(</span>config<span>.</span>filename<span>)</span><span>@job</span><span>def</span><span>log_file_job</span><span>(</span><span>)</span><span>:</span>process_file<span>(</span><span>)</span></code><p>You can write a sensor that watches for new files in a specific directory and yields a <code>RunRequest</code>for each new file in the directory. By default, this sensor runs every 30 seconds.</p><code><span>import</span>os
<span>from</span>dagster <span>import</span>sensor<span>,</span>RunRequest<span>,</span>RunConfig



Documentation Source:
release-1-7-2.dagster.dagster-docs.io/concepts/partitions-schedules-sensors/sensors.html

Documentation Title:
Sensors | Dagster Docs

Documentation Content:
<span>@sensor</span><span>(</span>job<span>=</span>log_file_job<span>)</span><span>def</span><span>my_directory_sensor</span><span>(</span><span>)</span><span>:</span><span>for</span>filename <span>in</span>os<span>.</span>listdir<span>(</span>MY_DIRECTORY<span>)</span><span>:</span>filepath <span>=</span>os<span>.</span>path<span>.</span>join<span>(</span>MY_DIRECTORY<span>,</span>filename<span>)</span><span>if</span>os<span>.</span>path<span>.</span>isfile<span>(</span>filepath<span>)</span><span>:</span><span>yield</span>RunRequest<span>(</span>run_key<span>=</span>filename<span>,</span>run_config<span>=</span>RunConfig<span>(</span>ops<span>=</span><span>{</span><span>"process_file"</span><span>:</span>FileConfig<span>(</span>filename<span>=</span>filename<span>)</span><span>}</span><span>)</span><span>,</span><span>)</span></code><p>This sensor iterates through all the files in <code>MY_DIRECTORY</code>and yields a <code>RunRequest</code>for each file.



Documentation Source:
release-1-7-2.dagster.dagster-docs.io/concepts/partitions-schedules-sensors/sensors.html

Documentation Title:
Sensors | Dagster Docs

Documentation Content:
The sensor evaluation function can yield a <code>SkipReason</code>with a string description that will be displayed in the UI.</p><p>For example, here is our directory sensor that now provides a <code>SkipReason</code>when no files are encountered:</p><code><span>@sensor</span><span>(</span>job<span>=</span>log_file_job<span>)</span><span>def</span><span>my_directory_sensor_with_skip_reasons</span><span>(</span><span>)</span><span>:</span>has_files <span>=</span><span>False</span><span>for</span>filename <span>in</span>os<span>.</span>listdir<span>(</span>MY_DIRECTORY<span>)</span><span>:</span>filepath <span>=</span>os<span>.</span>path<span>.</span>join<span>(</span>MY_DIRECTORY<span>,</span>filename<span>)</span><span>if</span>os<span>.</span>path<span>.</span>isfile<span>(</span>filepath<span>)</span><span>:</span><span>yield</span>RunRequest<span>(</span>run_key<span>=</span>filename<span>,</span>run_config<span>=</span><span>{</span><span>"ops"</span><span>:</span><span>{</span><span>"process_file"</span><span>:</span><span>{</span><span>"config"</span><span>:</span><span>{</span><span>"filename"</span><span>:</span>filename<span>}</span><span>}</span><span>}</span><span>}</span><span>,</span><span>)</span>has_files <span>=</span><span>True</span><span>if</span><span>not</span>has_files<span>:</span><span>yield</span>SkipReason<span>(</span><span><span>f"No files found in </span><span><span>{</span>MY_DIRECTORY<span>}</span></span><span>.



Documentation Source:
release-1-7-2.dagster.dagster-docs.io/concepts/partitions-schedules-sensors/sensors.html

Documentation Title:
Sensors | Dagster Docs

Documentation Content:
For example, you can:</p><ul><li>Launch a run whenever a file appears in an s3 bucket</li><li>Launch a run whenever another job materializes a specific asset</li><li>Launch a run whenever an external system is down</li></ul><p>A sensor defines an evaluation function that returns either:</p><ul><li>One or more <code>RunRequest</code>objects. Each run request launches a run.</li><li>An optional <code>SkipReason</code>, which specifies a message which describes why no runs were requested.</li></ul><p>The <a>Dagster daemon</a>runs each sensor evaluation function on a tight loop. If using sensors, follow the instructions in the <a>Dagster daemon documentation</a>to run your sensors.</p><h2>Relevant APIs<span>#</span></h2><table><tr><th>Name</th><th>Description</th></tr><tbody><tr><code>@sensor</code><td>The decorator used to define a sensor. The decorated function is called the sensor's evaluation function. The decorator returns a <code>SensorDefinition</code>.</td></tr><tr><code>SensorDefinition</code><td>Class for sensors. You almost never want to use initialize this class directly. Instead, you should use the <code>@sensor</code>decorator, which returns a <code>SensorDefinition</code></td></tr><tr><code>SensorEvaluationContext</code><td>The context object passed to a sensor evaluation function.</td></tr><tr><code>build_sensor_context</code><td>A function that constructs an instance of <code>SensorEvaluationContext</code>, This is intended to be used to test a sensor.</td></tr><tr><code>@run_status_sensor</code><td>The decorator used to define a run status sensor. The decorator returns a <code>RunStatusSensorDefinition</code></td></tr><tr><code>@run_failure_sensor</code><td>The decorator used to define a run failure sensor.



